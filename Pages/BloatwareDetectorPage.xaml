<Page x:Class="WindowsDebloater.Pages.BloatwareDetectorPage"
      xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
      xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
      xmlns:ui="http://schemas.modernwpf.com/2019"
      Title="BloatwareDetector">

    <ScrollViewer VerticalScrollBarVisibility="Auto">
        <StackPanel Margin="40,30,40,30">
            <!-- Header -->
            <TextBlock Text="Bloatware Detector" 
                      FontSize="28" 
                      FontWeight="SemiBold"
                      Margin="0,0,0,10"/>
            <TextBlock Text="Detect and remove unnecessary pre-installed applications" 
                      FontSize="14" 
                      Foreground="{DynamicResource SystemControlForegroundBaseMediumBrush}"
                      Margin="0,0,0,30"/>

            <!-- Warning -->
            <Border Background="#FFE5E5" 
                   BorderBrush="#FF6B6B" 
                   BorderThickness="2" 
                   CornerRadius="4" 
                   Padding="15"
                   Margin="0,0,0,20">
                <StackPanel>
                    <StackPanel Orientation="Horizontal" Margin="0,0,0,10">
                        <TextBlock Text="🔴" FontSize="20" Margin="0,0,10,0"/>
                        <TextBlock Text="PERMANENT REMOVAL WARNING" FontWeight="Bold" FontSize="14" VerticalAlignment="Center"/>
                    </StackPanel>
                    <TextBlock TextWrapping="Wrap" Margin="0,5,0,0">
                        <Run Text="• Removes apps for ALL users"/>
                    </TextBlock>
                    <TextBlock TextWrapping="Wrap">
                        <Run Text="• Blocks automatic reinstallation"/>
                    </TextBlock>
                    <TextBlock TextWrapping="Wrap">
                        <Run Text="• CANNOT be easily undone"/>
                    </TextBlock>
                    <TextBlock TextWrapping="Wrap" Margin="0,5,0,0" FontWeight="SemiBold">
                        <Run Text="Create a system restore point before proceeding!"/>
                    </TextBlock>
                </StackPanel>
            </Border>

            <!-- Controls -->
            <StackPanel Orientation="Horizontal" Margin="0,0,0,20" FlowDirection="LeftToRight">
                <Button Content="Scan for Bloatware" 
                       Click="ScanButton_Click"
                       Margin="0,0,10,0"
                       Padding="15,8"/>
                <Button Content="🗑️ Remove Selected" 
                       Click="RemoveButton_Click"
                       Margin="0,0,10,0"
                       Padding="15,8"
                       Style="{StaticResource AccentButtonStyle}"/>
                <Button Content="Select All" 
                       Click="SelectAllButton_Click"
                       Margin="0,0,10,0"
                       Padding="15,8"/>
                <Button Content="🔥 REMOVE EDGE (Takes about 30 seconds)" 
                       Click="RemoveEdgeButton_Click"
                       Padding="15,8"
                       Background="#DC3545"
                       Foreground="White"
                       FontWeight="Bold"
                       BorderBrush="#DC3545"/>
            </StackPanel>

            <!-- Bloatware List -->
            <Border Background="{DynamicResource SystemControlBackgroundAltHighBrush}"
                   BorderBrush="{DynamicResource SystemControlForegroundBaseLowBrush}"
                   BorderThickness="1"
                   CornerRadius="4"
                   Padding="0">
                <ListView x:Name="BloatwareListView"
                         Height="400"
                         SelectionMode="Extended"
                         BorderThickness="0">
                    <ListView.View>
                        <GridView>
                            <GridViewColumn Header="Application Name" Width="300">
                                <GridViewColumn.CellTemplate>
                                    <DataTemplate>
                                        <TextBlock Text="{Binding AppName}" FontWeight="SemiBold"/>
                                    </DataTemplate>
                                </GridViewColumn.CellTemplate>
                            </GridViewColumn>
                            <GridViewColumn Header="Publisher" Width="200">
                                <GridViewColumn.CellTemplate>
                                    <DataTemplate>
                                        <TextBlock Text="{Binding Publisher}"/>
                                    </DataTemplate>
                                </GridViewColumn.CellTemplate>
                            </GridViewColumn>
                            <GridViewColumn Header="Type" Width="120">
                                <GridViewColumn.CellTemplate>
                                    <DataTemplate>
                                        <TextBlock Text="{Binding AppType}" 
                                                  Foreground="{Binding TypeColor}"/>
                                    </DataTemplate>
                                </GridViewColumn.CellTemplate>
                            </GridViewColumn>
                            <GridViewColumn Header="Status" Width="150">
                                <GridViewColumn.CellTemplate>
                                    <DataTemplate>
                                        <TextBlock Text="{Binding Status}"/>
                                    </DataTemplate>
                                </GridViewColumn.CellTemplate>
                            </GridViewColumn>
                        </GridView>
                    </ListView.View>
                </ListView>
            </Border>

            <!-- Status -->
            <TextBlock x:Name="StatusTextBlock" 
                      Margin="0,15,0,0"
                      FontSize="13"
                      Foreground="{DynamicResource SystemControlForegroundBaseMediumBrush}"/>
        </StackPanel>
    </ScrollViewer>
</Page>
